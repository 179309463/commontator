<% # Clients of this partial must supply the following variable:
   # thread
%>

<span id="thread_<%= thread.id.to_s %>_header_span" class="thread_header">
  <%= thread.config.comment_name.capitalize.pluralize %>
</span>

<span id="thread_<%= thread.id.to_s %>_actions_span" class="thread_actions">
  <%= render :partial => 'actions',
             :locals => { :thread => thread } %>
</span>

<div id="thread_<%= thread.id.to_s %>_comment_list_div" class="thread_comment_list">
  <% thread.ordered_comments.each do |comment| %>
    <% next unless comment.can_be_read_by?(@commontator) %>
    <%= render :partial => 'commontator/comments/show',
               :locals => {:comment => comment} %>
  <% end %>
</div>

<% unless thread.is_closed? %>

  <br/>

  <div id="thread_<%= thread.id %>_new_comment_div" class="thread_new_comment"></div>

  <span id="thread_<%= thread.id %>_new_comment_link_span" class="thread_new_comment_link">
    <%= link_to thread.config.comment_create_verb_present.capitalize + ' ' + thread.config.comment_name,
        new_thread_comment_path(thread), :remote => true %>
  </span>
  
<% end %>
